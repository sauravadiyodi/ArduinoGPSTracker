
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.6.0/HERE_NOTICE
 */

H.util.eval("function mr(a,b,c,d,e){e&1&&nr(a,a,b,c,d,0);e&2&&nr(a,a,b,c,d,1);e&4&&nr(a,a,b,c,d,2);e&8&&nr(a,a,b,c,d,3)}\nfunction nr(a,b,c,d,e,f){var g=(c+1)*(c+1),h,k=4*d,l=c+1,m,p=[{r:0,Nl:0,yl:0,tl:0,next:null}];var q=1;var t=[\"r\",\"g\",\"b\",\"a\"][f];var v=2*c+1;for(var x,E;q<v;q++)p[q]={r:0,Nl:0,yl:0,tl:0,next:null},p[q-1].next=p[q];p[2*c].next=p[0];var O=4*(d-1);for(h=0;h<e;h++){var Y=h*k;var Fa=a[Y+f];var oa=Fa*l*(c+2)/2;v=Fa*l;for(q=0;q<=c;q++)p[q][t]=Fa;var Na=0;for(q=1;q<=c;q++){var ia=q<d?Y+4*q:Y+O;ia=a[ia+f];oa+=ia*(l-q);Na+=ia;p[c+q][t]=ia}ia=p[0];x=p[l];q=Y;E=4*l;var Vb=Y+O;for(Fa=0;Fa<d;Fa++){b[q+f]=oa/g;\noa-=v;var ob=Fa+l<d?q+E:Vb;ob=a[ob+f];Na+=ob;oa+=Na;v-=ia[t];v+=x[t];Na-=x[t];ia[t]=ob;ia=ia.next;x=x.next;q+=4;if(!oa)for(;(m=4*(Fa+l))<k&&0===a[Y+f+m];)Fa++,q+=4}}Y=(e-1)*k;for(Fa=0;Fa<d;Fa++){a=4*Fa;h=b[a+f];oa=h*l*(c+2)/2;v=h*l;for(q=0;q<=c;q++)p[q][t]=h;Na=0;for(q=1;q<=c;q++)ia=q<e?a+q*k:a+Y,ia=b[ia+f],oa+=ia*(c-q+1),Na+=ia,p[c+q][t]=ia;ia=p[0];x=p[l];q=a;Vb=l*k;O=a+Y;for(h=0;h<e;h++)if(b[q+f]=oa/g,oa-=v,ob=h+l<e?q+Vb:O,ob=b[ob+f],Na+=ob,oa+=Na,v-=ia[t],v+=x[t],Na-=x[t],ia[t]=ob,ia=ia.next,x=\nx.next,q+=k,!oa)for(;(m=h+l)<e&&0===b[m*k+f+a];)h++,q+=k}};function or(a,b,c){this.f=b=a>>b;this.j=Math.log(b)*Math.LOG2E;this.i=a=document.createElement(\"CANVAS\");this.a=a.getContext(\"2d\");this.b=a.width=a.height=3*b;var d=document.createElement(\"canvas\");a=c.a;var e=c.b;b=[];var f;d.width=256;d.height=1;d=d.getContext(\"2d\");for(g in e)e.hasOwnProperty(g)&&b.push({stop:parseFloat(g),value:e[g]});e=b.length;b.sort(this.m);0<b[0].stop&&b.unshift({stop:0,value:b[0].value});1>b[e-1].stop&&b.push({stop:1,value:b[e-1].value});e=b.length;var g=d.createLinearGradient(0,\n0,256,0);for(f=0;f<e;f++){if(!a&&k){var h=k.stop+(b[f].stop-k.stop)/2;g.addColorStop(h,k.value);g.addColorStop(h,b[f].value)}g.addColorStop(b[f].stop,b[f].value);var k=b[f]}d.fillStyle=g;d.fillRect(0,0,256,1);this.c=d.getImageData(0,0,256,1).data;this.g=c.a}or.prototype.m=function(a,b){return a.stop-b.stop};function pr(a,b){this.canvas=a;this.size=b};function qr(a,b,c){this.a=a=ld(a,0,30);this.Ra=b;this.i=c;this.m=[];this.b=[];do this.b[a]=[],this.m[a]=new rr;while(a--);b===sr?(this.s=tr,this.j=ur):(this.s=vr,this.j=wr);this.c=1/0;this.f=-1/0}var xr=Math.log(.5);function ur(a){return this.g?Math.round((a-this.c)/this.g*255):127}function wr(a){return void 0===this.W?127:Math.round(255*Math.pow(a,this.W))}\nqr.prototype.Kb=function(a){var b,c;var d=a.value;void 0===d&&(d=1);d>this.f&&(this.f=d,this.g=this.f-this.c);d<this.c&&(this.c=d,this.g=this.f-this.c);var e=Hh.Ob(a).scale(1073741823).floor();d=this.a;var f=e.x>>30-d;e=e.y>>30-d;for(c=this.s;-1<d;){this.b[d][e]||(this.b[d][e]=[]);(b=this.b[d][e][f])||(b=this.b[d][e][f]=new c);b.Kb(a,d);var g=this.m[d];g.f>b.b&&(g.f=b.b);g.a<b.b&&(g.a=b.b);g.c>b.a&&(g.c=b.a);g.b<b.a&&(g.b=b.a);d--;f>>=1;e>>=1}};\nfunction yr(a,b,c,d,e){var f=1<<b,g,h;d=kd(d,f);f=0<=c&&c<f&&(g=a.b[b])&&(h=g[c])&&(f=h[d])||null;!f&&e&&0<=b&&(f=yr(a,b-1,c>>1,d>>1,e));return f}function zr(a,b,c,d,e,f){for(var g,h=[];c<=d;c++)for(g=e;g<=f;g++)h.push(yr(a,b,c,g,!1));return h}function Ar(a,b){var c=0,d=0,e=yr(a,0,0,0,!1),f;if(!0===b.c)return b.f;b.z===a.a?b.f=b.a:(Br(a,b,function(b){var g=Cr(a,b),k=4-g.length;if(b.z!==a.a){for(f=0;f<g.length;f++)c+=g[f].a,d++;c+=k*e.a;d+=k}}),b.f=c/d);b.c=!0;return b.f}\nfunction Br(a,b,c){b=[b];for(var d,e;0<b.length;)e=b.shift(),d=Cr(a,e),c(e),b.push.apply(b,d)}function Cr(a,b){var c=[],d,e,f;for(e=0;1>=e;e++)for(f=0;1>=f;f++)(d=yr(a,b.z+1,2*b.x+e,2*b.y+f,!1))&&c.push(d);return c}qr.prototype.clear=function(){qr.call(this,this.a,this.Ra,this.i)};function vr(){this.a=this.b=this.g=0}vr.prototype.Kb=function(a,b){this.g++;this.b+=a.value||1;this.a=this.b/Math.pow(2,2*(30-b))};function tr(){this.a=this.b=this.g=0;this.c=!1}\ntr.prototype.Kb=function(a){a=a.value;this.b+=void 0!==a?a:1;this.a=this.b/++this.g;this.c=!1};function rr(){this.f=this.c=1/0;this.a=this.b=-1/0};function Dr(a,b){var c,d=0;if(!wa(a)||Ka(a))throw new D(Dr,0,a);for(c in a){var e=+c;d++;if(!(Tb(e)&&0<=e&&1>=e&&ra(a[c])))throw new D(Dr,0,a);}if(2>d)throw new D(Dr,0,\"Specify at least 2 stops\");this.b=a;this.a=!!b}u(\"H.data.heatmap.Colors\",Dr);var Er=new Dr({0:\"#008\",\"0.2\":\"#0b0\",\"0.5\":\"#ff0\",\"0.7\":\"#f00\"},!0);Dr.DEFAULT=Er;function Fr(a){var b=a||{},c=+b.sampleDepth;a=+b.coarseness;var d=b.colors,e={min:b.min,max:b.max},f=b.tileSize,g=+b.dataMax;b.tileSize&&(e.tileSize=f);Q.call(this,e);tj(this,b.opacity);this.Ra=\"value\"===b.type?sr:Gr;this.sampleDepth_=Tb(c)?ld(Math.round(c),1,8):4;this.D=!!b.assumeValues;b=this.max;this.C=Tb(g)?ld(Math.round(g),this.min,b+this.sampleDepth_):b;a=Tb(a)?ld(Math.round(a),0,3):1;if(d&&!C(d,Dr))throw new D(Fr,0,\"colors\");this.a=new qr(b+this.sampleDepth_,this.Ra,this.C);this.S=new or(this.tileSize,\na,d||Er);this.o=A(this.o,this);this.b=A(this.b,this);this.G=new Pj(20,this.o)}w(Fr,Q);u(\"H.data.heatmap.Provider\",Fr);Fr.prototype.oc=function(a){tj(this,a)};Fr.prototype.setOpacity=Fr.prototype.oc;Fr.prototype.Yc=function(){return this.j};Fr.prototype.getOpacity=Fr.prototype.Yc;Fr.prototype.Ve=Qe;Fr.prototype.providesRasters=Fr.prototype.Ve;\nFr.prototype.Qa=function(a,b,c,d,e){var f=this.D,g,h;if(yr(this.a,0,0,0,!1)){if(!f){var k=zr(this.a,c,b-1,b+1,a-1,a+1);for(g=k.length;g--&&!f;)if(null!==k[g]){f=!0;break}}f&&(h=this.G.push([a,b,c,d,e],this.b))}f||d(null);return h};Fr.prototype.requestInternal=Fr.prototype.Qa;\nfunction Hr(a,b,c,d){var e=document.createElement(\"canvas\"),f=a.tileSize,g=e.getContext(\"2d\");e.width=e.height=f;var h=a.S;var k=a.a,l=a.D,m=a.Ra;var p=h.f;var q=h.a,t,v,x=m===Gr?2:1,E=x;a=Math.min(a.sampleDepth_+x,h.j);x=h.b;var O=k.a;if(l&&m===sr){for(v=-1;1>=v;v++)for(l=-1;1>=l;l++){var Y=(Y=yr(k,d,c+v,b+l,!0))?k.j(Ar(k,Y)):128;q.fillStyle=\"rgba(\"+Y+\",128,0,1)\";q.fillRect((l+1)*p,(v+1)*p,p,p)}l=p-Math.floor(p/10);v=3;Y=q.getImageData(0,0,x,x);mr(Y.data,l,x,x,v);q.putImageData(Y,0,0)}else q.fillStyle=\nl?\"#080\":\"#000\",q.fillRect(0,0,x,x);for(;E<=a&&d+E<=O;E++){l=p>>E;v=p-l;var Fa=m===Gr?127+Math.floor(128/(1<<a-E)):255;Y=(1<<E)+2;var oa=1<<E;var Na=b<<E;var ia=c<<E;oa=zr(k,d+E,ia-1,ia+oa,Na-1,Na+oa);for(Na=oa.length;Na--;){ia=Na%Y;var Vb=Na/Y<<0;if(t=oa[Na])t=k.j(t.a),q.fillStyle=\"rgba(\"+t+\",\"+Fa+\",0,1)\",q.fillRect(ia*l+v,Vb*l+v,l,l)}Y=q;Fa=l;oa=v;Na=p+2*l;l=p+2*l;ia=ia=3;Vb=q.getImageData(oa,v,Na,l);mr(Vb.data,Fa,Na,l,ia);Y.putImageData(Vb,oa,v)}b=q.getImageData(0,0,x,x);c=h.c;d=h.g;k=b.data;a=\n0;for(x=k.length;a<x;a+=4)m=k[a],E=k[a+1],4===c.length&&(m=0),k[a]=c[4*m],k[a+1]=c[4*m+1],k[a+2]=c[4*m+2],k[a+3]=c[4*m+3]*(d?E/255:10>E?0:1);q.putImageData(b,0,0);h=new pr(h.i,p);p=h.size;g.drawImage(h.canvas,p,p,p,p,0,0,f,f);return e}Fr.prototype.o=function(a,b){a.done(Hr(this,b[0],b[1],b[2]))};Fr.prototype.b=function(a,b,c){var d=a.data;a=d[3];d=d[4];c?d():a(b)};\nFr.prototype.Wi=function(a,b){var c;if(!Qb(a))throw new D(this.Wi,0,a);if(c=a.length){for(;c--;)this.a.Kb(a[c]);a=this.a;var d;c=a.m;var e=a.a,f=0;if(a.Ra===Gr){var g=c[a.a].a;for(d=a.a;0<=d;d--)if(c[d].a===g)f=d;else break;g=c[0].a;for(d=0;d<=f;d++)if(g===c[d].a)e=d;else break;f>a.i&&(f=a.i);g=Math.round(e+(f-e)/2);a.W=xr/Math.log(c[g].b)}this.reload(!!b)}};Fr.prototype.addData=Fr.prototype.Wi;Fr.prototype.clear=function(){this.a.clear();this.reload(!0)};Fr.prototype.clear=Fr.prototype.clear;var Gr=0,sr=1;function Ir(){}u(\"H.data.utils.Dom\",Ir);Ir.prototype.Be=function(a){return/^1$|^true$/.test(this.Va(a))};Ir.prototype.getBoolean=Ir.prototype.Be;Ir.prototype.Va=function(a){var b;try{if(2===a.nodeType)return a.value;var c=\"\";var d=0;var e=a.childNodes;for(b=e.length;d<b;d++)c+=e[d].nodeValue.replace(/^\\s+|\\s+$/g,\"\")}catch(f){}return c||\"\"};Ir.prototype.getString=Ir.prototype.Va;Ir.prototype.eh=function(a){return parseFloat(this.Va(a))||0};Ir.prototype.getFloat=Ir.prototype.eh;\nIr.prototype.sk=function(a){var b=a.split(/\\s+/),c=b.length,d=!(b&&1==c),e=d?1:3,f=[],g;d||(b=a.split(\",\"),c=b.length);for(g=0;g<c;g+=e)if(a=this.Yh(d?b[g]:g+3>b.length?null:b.slice(g,g+3)))f.push(a);else return[];return f};Ir.prototype.parseCoords=Ir.prototype.sk;Ir.prototype.Yh=function(a){if(!a)return null;var b=a instanceof Array&&0<a.length&&4>a.length?a:a.split(\",\");a=parseFloat(b[0]);var c=parseFloat(b[1]);b=parseFloat(b[2]);return isNaN(c)||isNaN(a)?null:new I(c,a,isNaN(b)?void 0:b)};\nIr.prototype.parseCoord=Ir.prototype.Yh;Ir.prototype.Df=function(a){a=this.Va(a);return/^[0-9a-fA-F]{8}$/.test(a)?\"#\"+a.substr(6,2)+a.substr(4,2)+a.substr(2,2)+a.substr(0,2):\"#000000ff\"};Ir.prototype.getColor=Ir.prototype.Df;function Jr(){this.a={4:function(a){return[\"#\",a.charAt(1),a.charAt(1),a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),\"ff\"].join(\"\")},5:function(a){return[\"#\",a.charAt(1),a.charAt(1),a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),a.charAt(4),a.charAt(4)].join(\"\")},7:function(a){return a+\"ff\"},9:function(a){return a}};this.b={4:function(a){return[Kr(a.charAt(1)),Kr(a.charAt(2)),Kr(a.charAt(3)),255]},5:function(a){return[Kr(a.charAt(1)),Kr(a.charAt(2)),Kr(a.charAt(3)),Kr(a.charAt(4))]},7:function(a){a=\nparseInt(a.substring(1),16);return[a>>16&255,a>>8&255,a&255,255]},9:function(a){a=parseInt(a.substring(1),16);return[a>>24&255,a>>16&255,a>>8&255,a&255]}}}u(\"H.data.utils.ColorHelper\",Jr);function Kr(a){a=parseInt(a,16);return(a<<4)+a}function Lr(a){return 16>a?\"0\"+Math.round(a).toString(16):Math.round(a).toString(16)}\nfunction Mr(a,b,c){if(!/^(#|rgb).*/.test(b))return[0,0,0,255];c||(c=\"\",\"#\"===b.charAt(0)?c=a.a[b.length]?b:\"\":\"rgb\"===b.substr(0,3)&&(b=b.match(/\\d+(\\.\\d+)?/g),c=b.length,c=2<c&&5>c?[\"#\",Lr(+b[0]),Lr(+b[1]),Lr(+b[2]),3<c?Lr(255*+b[3]):\"ff\"].join(\"\"):\"\"),b=c);a=a.b[b.length](b);a[3]=Math.round(a[3]/255*100)/100;return a}\nJr.prototype.al=function(a,b){var c=\"\";if(!/^(#|rgb).*/.test(a)){c=\"\";for(a=0;6>a;a++)c+=\"ABCDEF0123456789\".charAt(Math.floor(16*Math.random()));return c+\"ff\"}a=Mr(this,a,b);for(b=0;4>b;b++)c+=Lr(3>b?Math.floor(Math.random()*(a[b]+1)):255*a[b]);return c};Jr.prototype.toRandomRGBA=Jr.prototype.al;function Nr(a){a=a.attributes;for(var b,c=a.length;c--;)switch(b=a[c],b.name){case \"x\":this.x=parseFloat(b.value);break;case \"y\":this.y=parseFloat(b.value);break;case \"xunits\":this.Zc=\"fraction\"===Ir.prototype.Va(b);break;case \"yunits\":this.Dc=\"fraction\"===Ir.prototype.Va(b)}}u(\"H.data.kml.HotSpot\",Nr);function Or(a){var b=a.childNodes,c=new Ir;for(a=b.length;a--;){var d=b[a];switch(d.nodeName){case \"href\":this.href=c.Va(d)}}}u(\"H.data.kml.Icon\",Or);function Pr(a){var b;if(a){a=a.childNodes;var c=a.length;for(b=new Ir;c--;){var d=a[c];switch(d.nodeName){case \"scale\":this.scale=b.eh(d);break;case \"Icon\":this.icon=d=new Or(d);break;case \"hotSpot\":this.Jj=d=new Nr(d)}}}}u(\"H.data.kml.IconStyle\",Pr);function Qr(a){a=a.childNodes;for(var b,c=a.length,d=new Ir,e=new Jr;c--;)switch(b=a[c],b.nodeName){case \"color\":this.color=d.Df(b);break;case \"colorMode\":this.a=d.Va(b)}\"random\"===this.a&&(this.color=\"#\"+e.al(this.color,!1))}u(\"H.data.kml.ColorStyle\",Qr);function Rr(a){var b=a.childNodes,c=b.length,d=new Ir;this.outline=this.fill=!0;for(this.uf=new Qr(a);c--;)switch(a=b[c],a.nodeName){case \"fill\":this.fill=d.Be(a);break;case \"outline\":this.outline=d.Be(a)}}u(\"H.data.kml.PolyStyle\",Rr);function Sr(a){var b=a.childNodes,c=b.length,d=new Ir;for(this.uf=new Qr(a);c--;)a=b[c],\"width\"===a.nodeName&&(this.width=d.eh(a))}u(\"H.data.kml.LineStyle\",Sr);function Tr(a){a=a.childNodes;for(var b,c=a.length,d=new Ir;c--;)switch(b=a[c],b.nodeName){case \"bgColor\":this.bgColor=d.Df(b);break;case \"textColor\":this.textColor=d.Df(b);break;case \"text\":this.text=d.Va(b);break;case \"displayMode\":this.displayMode=d.Va(b)}}u(\"H.data.kml.BalloonStyle\",Tr);function Ur(a){var b=a.childNodes,c=b.length;for(this.id=a.getAttribute(\"id\");c--;)switch(a=b[c],a.nodeName){case \"IconStyle\":this.Kj=a=new Pr(a);break;case \"LineStyle\":this.Zd=a=new Sr(a);break;case \"PolyStyle\":this.uk=a=new Rr(a);break;case \"BalloonStyle\":this.pf=a=new Tr(a)}}u(\"H.data.kml.Style\",Ur);function Vr(a,b){a=a.childNodes;var c=a.length,d=new Ir;for(this.b=b;c--;)switch(b=a[c],b.nodeName){case \"key\":this.key=d.Va(b);break;case \"styleUrl\":this.a=d.Va(b)}}u(\"H.data.kml.Pair\",Vr);Vr.prototype.Ia=function(){if(this.a){var a=\"highlight\"===this.key?!0:!1;a=this.b.mh(this.a.substr(1),a)}return a};Vr.prototype.getStyle=Vr.prototype.Ia;function Wr(a,b){var c=a.childNodes,d=c.length;this.b=b;this.id=a.getAttribute(\"id\");for(this.a=[];d--;)a=c[d],\"Pair\"===a.nodeName&&(a=new Vr(a,this.b),this.a.push(a))}u(\"H.data.kml.StyleMap\",Wr);Wr.prototype.Ia=function(a){var b=null;a=a?\"highlight\":\"normal\";for(var c=this.a.length;c--;)this.a[c].key===a&&(b=this.a[c].Ia());return b};Wr.prototype.getStyle=Wr.prototype.Ia;function Xr(){this.a={}}u(\"H.data.kml.StyleContainer\",Xr);Xr.prototype.Eg=function(a){a&&a.id&&(this.a[\"style_\"+a.id]=a)};Xr.prototype.addStyle=Xr.prototype.Eg;Xr.prototype.mh=function(a,b){a=this.a[\"style_\"+a];a instanceof Wr&&(a=a.Ia(b));return a};Xr.prototype.getStyleById=Xr.prototype.mh;function Yr(a,b){var c=a&&a.childNodes||[],d=new Ir;if(!a||!b)throw Error(\"Node or stylesContainer is not defined\");this.visibility=!0;this.Mn=a;for(a=c.length;a--;){var e=c[a];switch(e.nodeName){case \"name\":this.name=d.Va(e);break;case \"description\":this.description=d.Va(e);break;case \"visibility\":this.visibility=d.Be(e);break;case \"open\":this.open=d.Be(e);break;case \"styleUrl\":if(this.a=d.Va(e))e=this.a.substr(1),this.Ll=b.mh(e,!1);break;case \"Style\":this.Sj=e=new Ur(e)}}}\nu(\"H.data.kml.Feature\",Yr);function Zr(a){a=a.childNodes;for(var b,c=a.length,d=null,e=new Ir;c--;)b=a[c],\"coordinates\"===b.nodeName&&(d=e.Va(b));this.a=null;d&&(this.a=e.Yh(d)||null)}u(\"H.data.kml.Point\",Zr);function $r(a){a=a.childNodes;for(var b,c=a.length,d=new Ir;c--;)if(b=a[c],\"coordinates\"===b.nodeName){b=d.Va(b);var e=[],f=new Ir;try{e=f.sk(b)}catch(g){e=[]}this.a=2>e.length?[]:e}}u(\"H.data.kml.Line\",$r);function as(a){for(var b=new K,c=a.a?a.a.length:0;c--;)b.sd(a.a[c]);return b};function bs(a){a=a.childNodes;var b=a.length;for(this.a=new K;b--;){var c=a[b];if(\"outerBoundaryIs\"===c.nodeName){var d=c.childNodes;for(c=d.length;c--;){var e=d[c];\"LinearRing\"===e.nodeName&&(e=new $r(e),this.a=as(e))}}}}u(\"H.data.kml.Polygon\",bs);function cs(a,b){var c=document.createElement(\"CANVAS\");c.width=1;c.height=1;this.i=a;this.c={};this.f={};this.g=new Si(c);this.b=b||\"\"}cs.prototype.create=function(a){this.a=new Yr(a,this.i);return ds(this,a,null)};\nfunction ds(a,b,c){b=b.childNodes;for(var d=b.length,e,f={},g;d--;){var h=b[d];switch(h.nodeName){case \"Point\":e=new Zr(h);g=es(a,\"Marker\");e=new Om(e.a,g);g.Zh&&pe(g.Zh,\"statechange\",A(a.j,a,g.Zh,e,g),!1);break;case \"LineString\":e=new $r(h);g=es(a,\"Polyline\");e=new Xg(as(e),g);break;case \"LinearRing\":e=new $r(h);g=es(a,\"Polyline\");e=new Xg(as(e),g);break;case \"Polygon\":e=new bs(h);g=es(a,\"Polygon\");e=new gh(e.a,g);break;case \"MultiGeometry\":e=new P,e.multiGeometry=1,e=ds(a,h,e)}e&&(a.a.name&&(f.name=\na.a.name),a.a.description&&(f.description=a.a.description),g&&g.pf&&(f.balloonStyle=g.pf),f.kmlNode=a.a.Mn,e.setData(f),c&&c.U(e))}c&&(e=c);return e}cs.prototype.j=function(a,b,c){var d=c.anchor,e=c.scale;c=e+\"_\"+d.x+d.y+d.Zc+d.Dc+\"_\"+c.href;var f={};if(1===a.getState()){var g=this.c[c];if(!g){var h=d.x;var k=d.y;if(g=a.Db())g={w:g.w*e,h:g.h*e},f.size=g;h=d.Zc&&g?g.w*h:h*e;k=d.Dc&&g?g.h*(1-k):!d.Dc&&g?g.h-k*e:k*e;f.anchor={x:h,y:k};g=new Si(a.Vc(),f);this.c[c]=g}b.dd(g)}delete this.f[c]};\nfunction es(a,b){var c=a.a,d={visibility:c.visibility};var e=new Jr;var f=1;var g={x:0,y:0,Zc:!1,Dc:!1};var h=fs(a,c.Ll);c.Sj&&(h=fs(a,c.Sj,h));switch(b){case \"Marker\":if(h&&h.Kj){e=h.Kj;e.scale&&(f=e.scale);if(e.Jj){var k=e.Jj;g={x:k.x,y:k.y,Zc:k.Zc,Dc:k.Dc}}e.icon&&e.icon.href?(b=e.icon.href,gs.test(b)||(b=a.b+b),e=f+\"_\"+g.x+g.y+g.Zc+g.Dc+\"_\"+b,k=a.c[e]||a.f[e],k||(k=new Si(b),a.f[e]=k),0===k.getState()?(d.icon=a.g,d.Zh=k,d.href=b,d.anchor=g,d.scale=f):1===k.getState()&&(d.icon=k)):1!==f&&(k||(g=\n{x:14,y:4,Zc:!1,Dc:!1}),a={w:28*f,h:36*f},f={size:new vh(a.w,a.h),anchor:new H(g.Zc?a.w*g.x:g.x*f,g.Dc?a.h*(1-g.y):a.h-g.y*f),hitArea:new wh(3,[0*f,16*f,0*f,7*f,8*f,0*f,18*f,0*f,26*f,7*f,26*f,16*f,18*f,34*f,8*f,34*f])},d.icon=new Si('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28px\" height=\"36px\"><path d=\"M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z\" fill=\"#000\" fill-opacity=\".2\"/><path d=\"M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z\" fill=\"#fff\"/><path d=\"M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z\" fill=\"#18d\"/></svg>',\nf))}break;case \"Polyline\":d.style={};h&&h.Zd&&(f=h.Zd,d.style.strokeColor=\"rgba(\"+Mr(e,f.uf.color,!0)+\")\",0<=f.width&&(d.style.lineWidth=f.width));break;case \"Polygon\":d.style={},h&&(h.Zd&&(f=h.Zd,d.style.strokeColor=\"rgba(\"+Mr(e,f.uf.color,!0)+\")\",0<=f.width&&(d.style.lineWidth=f.width)),h.uk&&(f=h.uk,d.style.fillColor=f.fill?\"rgba(\"+Mr(e,f.uf.color,!0)+\")\":\"rgba(0,0,0,0)\",f.outline||(d.style.lineWidth=0)))}d.pf=h.pf;return d}\nfunction fs(a,b,c){c=c||{};for(var d in b)b.hasOwnProperty(d)&&(c[d]=\"object\"===typeof b[d]?fs(a,b[d],c[d]):b[d]);return c}var gs=/^[^:\\/]+:/;function hs(a){Mb(this,hs);this.url=a;this.b=[];this.a=z;this.c=A(this.c,this);G.call(this)}w(hs,G);u(\"H.data.AbstractReader\",hs);var is={ERROR:-1,LOADING:0,VISIT:1,READY:2};hs.State=is;hs.prototype.f=is.READY;hs.prototype.j={ql:\"statechange\"};hs.prototype.Bb=function(){if(!this.a){this.a=new M;var a=this.a.ic();a.fd(this.b)}return new Lk(this.a)};hs.prototype.getLayer=hs.prototype.Bb;hs.prototype.Dm=function(){return this.b.concat([])};hs.prototype.getParsedObjects=hs.prototype.Dm;\nhs.prototype.Ja=function(){return this.url};hs.prototype.getUrl=hs.prototype.Ja;hs.prototype.ao=function(a){if(this.f===is.LOADING||this.f===is.VISIT)throw Error(\"InvalidState: state \"+this.f);this.b=[];this.a=z;this.url=a;return this};hs.prototype.setUrl=hs.prototype.ao;hs.prototype.getState=function(){return this.f};hs.prototype.getState=hs.prototype.getState;hs.prototype.R=function(a,b,c){this.f=a;this.dispatchEvent(new js(b||this,this.j.ql,a,c||\"\"))};\nhs.prototype.parse=function(){var a=this;Lb(this.url)?(this.R(is.LOADING),(new bf(\"text/plain\",this.url)).then(function(b){try{a.c(b)}catch(c){a.R(is.ERROR,z,c.message)}},function(){a.R(is.ERROR,z,\"Error loading file\")})):a.R(is.ERROR,z,\"File url was not set\")};hs.prototype.parse=hs.prototype.parse;function js(a,b,c,d){js.l.constructor.call(this,b,a);this.state=c;this.message=d}w(js,Ec);function ks(a){var b=a?a.lastIndexOf(\"/\"):B;this.g=[];hs.call(this,a);0<=b&&(this.i=a.substr(0,b)+\"/\")}w(ks,hs);u(\"H.data.kml.Reader\",ks);\nks.prototype.c=function(a){var b,c=null;if(a&&\"\"!=a.trim()){try{var d=(new DOMParser).parseFromString(a,\"text/xml\")}catch(h){this.R(is.ERROR,void 0,\"Error parsing KML document\");return}if(d.getElementsByTagName(\"parsererror\").length)this.R(is.ERROR,void 0,\"Error parsing KML document\");else if((a=d.childNodes&&\"kml\"===d.childNodes[0].nodeName?d.childNodes[0]:void 0)&&(b=ls(a.childNodes,\"Document\")[0]),b=b||a){d=new Xr;for(var e=ls(b.childNodes,\"Style\"),f=ls(b.childNodes,\"StyleMap\"),g=e.length;g--;)a=\nnew Ur(e[g]),d.Eg(a);for(g=f.length;g--;)a=new Wr(f[g],d),d.Eg(a);this.s=d;this.m=new cs(this.s,this.i);a=b.childNodes;for(b=a.length;b--;)if(e=a[b],d=c,\"Placemark\"===e.nodeName?(e=this.m.create(e))&&ms(this,e,d):\"Folder\"===e.nodeName&&(e={group:new P,node:e},ms(this,e.group,d),this.g.push(e)),!b&&(d=this.g.shift()))a=d.node.childNodes,c=d.group,b=a.length;this.R(is.READY)}else this.R(is.ERROR,void 0,\"Invalid KML document\")}else this.R(is.ERROR,void 0,\"Unable to create objects from the empty data\")};\nfunction ms(a,b,c){c?c.U(b):(a.a&&a.a.ic().U(b),a.b.push(b),a.R(is.VISIT,b))}function ls(a,b){for(var c=a.length,d,e=[];c--;)d=a[c],d.nodeName===b&&e.push(d);return e};function ns(a){this.a=a}\nns.prototype.create=function(a,b){switch(a.type){case \"Point\":var c=new Om(os(a.coordinates));break;case \"LineString\":c=new Xg(ps(a.coordinates));break;case \"Polygon\":c=new gh(new N(ps(a.coordinates[0])));break;case \"MultiPoint\":var d=c=new P;for(var e=a.coordinates,f=0,g=e.length,h;f<g;f++)h=new Om(os(e[f])),d.U(h);d=\"multiPoint\";break;case \"MultiLineString\":d=c=new P;e=a.coordinates;f=0;for(g=e.length;f<g;f++)h=new Xg(ps(e[f])),d.U(h);d=\"multiLineString\";break;case \"MultiPolygon\":d=c=new P;e=a.coordinates;\nf=0;for(g=e.length;f<g;f++)h=new gh(new N(ps(e[f][0]))),d.U(h);d=\"multiPolygon\";break;case \"GeometryCollection\":d=c=new P;e=a.geometries;f=0;for(g=e.length;f<g;f++)this.create(e[f],d);d=\"geometryCollection\"}c&&(a=a.properties,e={},a&&(e.properties=a),d&&(e[d]=!0),c.setData(e),this.a(c));b&&c&&b.U(c);return c};ns.prototype.create=ns.prototype.create;function os(a){return new I(a[1],a[0])}function ps(a){for(var b=0,c=a.length,d=new K;b<c;b++)d.sd(os(a[b]));return d};function qs(a,b){this.g=(b||{}).style||this.Hd;hs.call(this,a)}w(qs,hs);u(\"H.data.geojson.Reader\",qs);\nqs.prototype.c=function(a){var b,c;try{var d=\"string\"===typeof a?JSON.parse(a):a;if(\"object\"===typeof d){var e=new ns(this.g);switch(d.type){case \"FeatureCollection\":if(b=d.features){var f=new P;rs(this,f);for(c=0;c<b.length;c++){var g=ss(b[c]);(g=e.create(g))&&f.U(g)}}break;case \"Feature\":g=ss(d);(g=e.create(g))&&rs(this,g);break;default:(g=e.create(d))&&rs(this,g)}this.R(is.READY)}else this.R(is.ERROR,void 0,\"Invalid syntax\")}catch(h){this.R(is.ERROR,void 0,\"Parse error. \"+h.message)}};\nqs.prototype.Ln=function(a){this.R(is.LOADING);this.c(a)};qs.prototype.parseData=qs.prototype.Ln;qs.prototype.Hd=function(){};function ss(a){var b={};if(a.geometry&&a.properties){var c=a.geometry;b.type=c.type;b.properties=a.properties;c.coordinates&&(b.coordinates=c.coordinates);c.geometries&&(b.geometries=c.geometries)}return b}function rs(a,b){a.a&&a.a.ic().U(b);a.b.push(b);a.R(is.VISIT,b)};u(\"H.data.buildInfo\",function(){return pf(\"mapsjs-data\",\"1.6.0\",\"cbdad1b\")});\n");